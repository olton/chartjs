/*! 
 * MetroUI :: ChartJS - Create different charts in js
 * https://pimenov.com.ua
 *
 * Copyright 2021 Serhii Pimenov
 * Released under the MIT license
 */
!function(){"use strict";var t={width:1,lineType:"solid",color:"#e3e3e3",radius:0},i={style:"normal",family:"Helvetica, sans-serif",size:12,weight:"normal",lineHeight:1.2},e=Object.assign({},i,{weight:"bold"}),o={dpi:1,height:200,width:"100%",padding:{top:40,bottom:40,left:40,right:40},margin:{top:0,bottom:0,left:0,right:0},background:"#fff",color:"#000",font:i,border:t,title:{display:!0,align:"center",
// start, center, end
rtl:!1,color:"#000",text:"",font:Object.assign({},i,{weight:"bold",size:24}),padding:{top:10,bottom:10,left:10,right:10}},legend:{rtl:!1,margin:{top:20,left:0,right:0,bottom:0},padding:{top:0,left:0,right:0,bottom:0},font:e,border:t,dash:[],color:"#fff",vertical:!1,position:"top-left"},tooltip:{width:"auto",background:"#fff",color:"#000",font:i,border:t,padding:{top:10,bottom:10,left:10,right:10},shadow:{shiftX:2,shiftY:2,blur:4,stretch:0,color:"rgba(0,0,0,.5)"}},boundaries:!1,accuracy:10,value:{fixed:0},onDrawLabelY:null,onDrawLabelX:null,onTooltipShow:null,onHover:null,onLeave:null};
/**
     * Simple object check.
     * @param item
     * @returns {boolean}
     */
function s(t){return t&&"object"==typeof t&&!Array.isArray(t)}
/**
     * Deep merge two objects.
     * @param target
     * @param ...sources
     */function a(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),o=1;o<i;o++)e[o-1]=arguments[o];if(!e.length)return t;var r=e.shift();if(s(t)&&s(r))for(var n in r)s(r[n])?(t[n]||Object.assign(t,{[n]:{}}),a(t[n],r[n])):Object.assign(t,{[n]:r[n]});return a(t,...e)}var r=(t,i,e,o)=>{var[s,a]=e,{align:r="left",color:n="#000",stroke:l="#000",font:h}=o,{style:c="normal",weight:d="normal",size:f=12,lineHeight:p=1,family:v="sans-serif"}=h;t.save(),t.beginPath(),t.textAlign=r,t.fillStyle=n,t.strokeStyle=l,t.font="".concat(c," ").concat(d," ").concat(f,"px/").concat(p," ").concat(v),i.toString().split("\n").map(((i,e)=>{t.fillText(i,s,a+a*e*p)})),t.closePath(),t.restore()},n=(t,i,e)=>{var o,{font:s=null}=e,a=0;if(t.save(),s){var{style:r="normal",weight:n="normal",size:l=12,lineHeight:h=1.2,family:c="sans-serif"}=s;t.font="".concat(r," ").concat(n," ").concat(l,"px/").concat(h," ").concat(c)}for(var d=0;d<i.length;d++)(o=t.measureText(i[d][0]).width)>a&&(a=o);return t.restore(),a},l=(t,i,e)=>{var[o,s,a]=i,{color:r="#000",fill:n="#fff",size:l=1,dash:h=[]}=e;t.beginPath(),t.save(),t.setLineDash(h),t.lineWidth=l,t.strokeStyle=r,t.fillStyle=n,t.rect(o-a,s-a,2*a,2*a),t.fill(),t.stroke(),t.restore(),t.closePath()},h=t=>"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t,c=t=>"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t,d={legend(){return!0===this.options.legend.vertical?this.legendVertical():this.legendHorizontal()},legendHorizontal(){var t,i,e,o,a=this.options,d=h(a.padding),f=a.legend,p=h(f.padding),v=c(f.margin),g=this.ctx,u=this.legendItems,b=0;if(f&&s(f)&&u&&Array.isArray(u)&&u.length){o=f.font.size/2,t=f.font.size*f.font.lineHeight,e=d.top+this.viewHeight+f.font.size+p.top+v.top,i=d.left+p.left+v.left;for(var m=0;m<u.length;m++){var[x]=u[m];b+=n(g,[[x]],{font:f.font})+2*o+5}b=(this.viewWidth-b)/2;for(var w=0;w<u.length;w++){var[y,z]=u[w],X=n(g,[[y]],{font:f.font});i+X>this.viewWidth&&(i=d.left+p.left+v.left,e+=t),l(g,[b+i,e,o],{color:z,fill:z}),r(g,y,[b+i+o+5,e+o/2],{color:a.font.color,stroke:a.font.color,font:a.font}),i+=o+X+20}}},legendVertical(){var t,i,e,o,a,d,f=this.options,p=f.legend,v=null!==(t=p.font)&&void 0!==t?t:f.font,g=v.size/2,u=this.ctx,b=this.legendItems,m=h(p.padding),x=c(p.margin),w=h(f.padding);if(p&&s(p)&&b&&Array.isArray(b)&&b.length){i=v.size*v.lineHeight,a=n(u,b,{font:v})+m.left+m.right+3*g+5,d=b.length*i+m.top+m.bottom+5,"top-left"===p.position?(e=w.left+x.left,o=w.top+x.top):"top-right"===p.position?(e=this.dpiWidth-a-x.right-w.right,o=w.top+x.top):"bottom-left"===p.position?(e=w.left+x.left,o=this.dpiHeight-d-w.bottom+x.bottom):(e=this.dpiWidth-a-x.right-w.right,o=this.dpiHeight-d-w.bottom+x.bottom),((t,i,e)=>{var[o,s,a,r]=i,{color:n="#fff",borderColor:l="#000",dash:h=[],size:c=1}=e;t.save(),t.beginPath(),t.strokeStyle=l,t.fillStyle=n,t.setLineDash(h),t.lineWidth=c,t.clearRect(o,s,a,r),t.fillRect(o,s,a,r),c&&t.strokeRect(o,s,a,r),t.closePath(),t.restore()})(u,[e,o,a,d],{color:p.color,dash:p.dash,size:p.border.width,borderColor:p.border.color}),e+=g+5+m.left,o+=g+5+m.top;for(var y=0;y<b.length;y++){var[z,X]=b[y];l(u,[e,o,g],{color:X,fill:X}),r(u,z,[e+g+5,o+g/2+2],{color:f.font.color,stroke:f.font.color,font:p.font}),o+=i}}}},f={showTooltip(t,i){var e=this.options;if(this.tooltip&&(this.tooltip.remove(),this.tooltip=null),e.tooltip){var{x:o,y:s}=this.proxy.mouse,a=document.createElement("div"),r=e.onTooltipShow,n=e.tooltip.font,l=e.tooltip.shadow,c=e.tooltip.border,d=h(e.tooltip.padding);a.style.position="fixed",a.style.border="".concat(c.width,"px ").concat(c.lineType," ").concat(c.color),a.style.borderRadius="".concat(c.radius),a.style.padding="".concat(d.top,"px ").concat(d.right,"px ").concat(d.bottom,"px ").concat(d.left,"px"),a.style.background="".concat(e.tooltip.background),a.style.font="".concat(n.style," ").concat(n.weight," ").concat(n.size,"px/").concat(n.lineHeight," ").concat(n.family),a.style.boxShadow="".concat(l.shiftX,"px ").concat(l.shiftY,"px ").concat(l.blur,"px ").concat(l.color),a.innerHTML=r&&"function"==typeof r?r.apply(null,[t,i]):t,document.querySelector("body").appendChild(a),a.style.top="".concat(s-a.clientHeight-15,"px"),a.style.left="".concat(o-a.clientWidth/2-5,"px"),this.tooltip=a}}};class p{constructor(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown";if(this.el=document.querySelector(t),!this.el)throw new Error("You must define a selector for chart wrapper element!");this.options=a({},o,e),this.data=i,this.canvas=null,this.ctx=null,this.raf=null,this.tooltip=null,this.legendItems=[],this.chartType=s,this.rect=this.el.getBoundingClientRect(),this.canvasRect=null;var r=this;this.proxy=new Proxy({},{set(){var t=Reflect.set(...arguments);return r.raf=requestAnimationFrame(r.draw.bind(r)),t}}),this.options.border&&(this.el.style.border="".concat(this.options.border.width,"px ").concat(this.options.border.lineType," ").concat(this.options.border.color)),this.calcInternalValues(),this.createCanvas(),this.addEvents()}createCanvas(){this.canvas=document.createElement("canvas"),this.el.innerHTML="",this.el.style.overflow="hidden",this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.setCanvasSize(),this.canvasRect=this.canvas.getBoundingClientRect()}setCanvasSize(){var t=this.options;this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=t.dpi*this.width,this.canvas.height=t.dpi*this.height}calcInternalValues(){var t,i,e=this.options,o=h(e.padding),s=this.el.getBoundingClientRect(),{width:a,height:r}=s;t=e.width.toString().includes("%")?a/100*parseInt(e.width):+e.width,i=e.height.toString().includes("%")?r/100*parseInt(e.height):+e.height,this.width=t,this.height=i,this.dpiHeight=e.dpi*i,this.dpiWidth=e.dpi*t,this.viewHeight=this.dpiHeight-(o.top+o.bottom),this.viewWidth=this.dpiWidth-(o.left+o.right)}title(){var t,i=this.options.title,e=this.ctx;if(i&&i.text){var{text:o,align:s,color:a,font:n}=i;switch(s){case"center":t=this.dpiWidth/2;break;case"right":t=this.dpiWidth-5;break;default:t=5}r(e,o,[t,n.size+5],{align:i.align,color:i.color,stroke:i.color,font:i.font})}}draw(){this.clear(),this.title()}clear(){this.ctx.clearRect(0,0,this.dpiWidth,this.dpiHeight)}setData(t,i){this.data[t].data=i,this.draw()}mouseMove(t){var i=this.options.onHover,{clientX:e,clientY:o}=t;"function"==typeof i&&i.apply(null,[e,o]),this.proxy.mouse={x:e,y:o}}mouseLeave(){var t=this.options.onLeave;"function"==typeof t&&t.apply(null,[]),this.proxy.mouse=null}resize(){this.calcInternalValues(),this.setCanvasSize(),this.rect=this.el.getBoundingClientRect(),this.canvasRect=this.canvas.getBoundingClientRect(),this.draw()}addEvents(){var t=this.canvas;t.addEventListener("mousemove",this.mouseMove.bind(this)),t.addEventListener("mouseleave",this.mouseLeave.bind(this)),window.addEventListener("resize",this.resize.bind(this))}destroy(){var t=this.canvas;cancelAnimationFrame(this.raf),t.removeEventListener("mousemove",this.mouseMove.bind(this)),t.removeEventListener("mouseleave",this.mouseLeave.bind(this)),window.removeEventListener("resize",this.resize.bind(this))}}Object.assign(p.prototype,d),Object.assign(p.prototype,f);var v=function(){var t,i,e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";if("number"==typeof a)o=a;else switch(a.toString().toLowerCase()){case"y":o=1;break;case"z":o=2;break;default:o=0}for(var r of s)e=r[o],(isNaN(t)||t>e)&&(t=e),(isNaN(i)||i<e)&&(i=e);return[t,i]},g=(t,i,e)=>{var[o,s,a]=i,{color:r="#000",fill:n="#fff",size:l=1}=e;t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=r,t.fillStyle=n,t.arc(o,s,a,0,2*Math.PI),t.fill(),t.stroke(),t.restore(),t.closePath()},u=(t,i,e)=>{var[o,s,a]=i,{color:r="#000",fill:n="#fff",size:l=1}=e;t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=r,t.fillStyle=n,t.moveTo(o,s-a),t.lineTo(o+a,s+a),t.lineTo(o-a,s+a),t.lineTo(o,s-a),t.fill(),t.stroke(),t.restore(),t.closePath()},b=(t,i,e)=>{var[o,s,a]=i,{color:r="#000",fill:n="#fff",size:l=1}=e;t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=r,t.fillStyle=n,t.moveTo(o,s-a),t.lineTo(o+a,s),t.lineTo(o,s+a),t.lineTo(o-a,s),t.lineTo(o,s-a),t.fill(),t.stroke(),t.restore(),t.closePath()},m={arrow:{color:"#000",size:1,dash:[],factorX:5,factorY:5},line:{color:"#e3e3e3",size:1,dash:[],count:5,show:!0},label:{color:"#000",font:e,count:5,
// odd, even, num
show:!0,min:!0,max:!0,fixed:!1}},x={x:m,y:m},w={size:1,color:"#bbb",dash:[5,3]},y={axis:x,cross:w},z={cross(){var t=this.options,i=t.cross,e=h(t.padding),o=this.ctx,s=this.canvas.getBoundingClientRect();if(t.cross&&(!t.cross||this.proxy.mouse)){var{x:a,y:r}=this.proxy.mouse;a-=s.left,r-=s.top,a-e.left+1<0||a>this.viewWidth+e.left+1||r-e.top+1<0||r>this.viewHeight+e.top+1||(o.beginPath(),o.setLineDash(t.cross.dash),o.lineWidth=i.size,o.strokeStyle=i.color,// vertical line
o.moveTo(a,e.top),o.lineTo(a,this.viewHeight+e.top),// Horizontal line
o.moveTo(e.left,r),o.lineTo(this.viewWidth+e.left,r),o.arc(a,r,10,0,2*Math.PI),o.stroke(),o.closePath())}}},X=(t,i,e)=>{var[o,s,a,r]=i,{color:n="#000",size:l=1,dash:h=[]}=e;t.beginPath(),t.save(),t.setLineDash(h),t.lineWidth=l,t.strokeStyle=n,t.moveTo(o,s),t.lineTo(a,r),t.stroke(),t.restore(),t.closePath()},Y={arrowX(){var t=this.options,i=this.ctx,e=h(t.padding),o=e.left,s=this.viewHeight+e.top,a=o+this.viewWidth,r=s;if(t.axis.x.arrow){var n=t.axis.x.arrow;((t,i,e)=>{var[o,s,a,r,n,l]=i,{color:h="#000",dash:c=[],size:d=1}=e;t.beginPath(),t.strokeStyle=h,t.lineWidth=d,t.setLineDash(c),t.moveTo(o,s),t.lineTo(a,r),t.moveTo(a,r),t.lineTo(a-n,r-l),t.moveTo(a,r),t.lineTo(a-n,r+l),t.stroke(),t.closePath()})(i,[o,s,a,r,n.factorX,n.factorY],{color:n.color,size:n.size,dash:n.dash})}},axisX(){var t,i=this.ctx,e=this.options,o=h(e.padding);if(e.axis.x){console.log(this.maxX,this.minX);for(var s=e.axis.x,a=null!==(t=s&&s.label&&s.label.font)&&void 0!==t?t:e.font,n=this.viewWidth/s.line.count,l=(this.maxX-this.minX)/s.line.count,c=Math.round(s.line.count/s.label.count),d=0;d<=s.line.count;d++){var f=n*d+o.left,p=this.minX+l*d;"number"==typeof s.label.fixed&&(p=p.toFixed(s.label.fixed)),s.line.show&&X(i,[f,o.top,f,this.viewHeight+o.top],{color:s.line.color,size:s.line.size,dash:s.line.dash}),s.label.show&&(c&&d&&d%c!=0||(s.label.min||p!==this.minX)&&("function"==typeof e.onDrawLabelX&&(p=e.onDrawLabelX.apply(null,[p])),// if (x + ctx.measureText(labelXValue.toString()).width > this.viewWidth) continue
X(i,[f,this.viewHeight+o.top,f,this.viewHeight+o.top+5],{}),r(i,p.toString(),[f,this.viewHeight+o.top+a.size+5],{align:"center",font:a})))}}},arrowY(){var t=this.options,i=this.ctx,e=h(t.padding),o=e.left,s=this.viewHeight+e.top,a=o,r=e.top;if(t.axis.y.arrow){var n=t.axis.y.arrow;((t,i,e)=>{var[o,s,a,r,n,l]=i,{color:h="#000",dash:c=[],size:d=1}=e;t.beginPath(),t.strokeStyle=h,t.lineWidth=d,t.setLineDash(c),t.moveTo(o,s),t.lineTo(a,r),t.moveTo(a,r),t.lineTo(a-n,r+l),t.moveTo(a,r),t.lineTo(a+n,r+l),t.stroke(),t.closePath()})(i,[o,s,a,r,n.factorX,n.factorY],{color:n.color,size:n.size,dash:n.dash})}},axisY(){var t,i=this.ctx,e=this.options,o=h(e.padding);if(e.axis.y)for(var s=e.axis.y,a=null!==(t=s&&s.label&&s.label.font)&&void 0!==t?t:e.font,n=this.viewHeight/s.line.count,l=(this.maxY-this.minY)/s.line.count,c=Math.floor(s.line.count/s.label.count),d=0;d<s.line.count+1;d++){var f=this.viewHeight+o.top-n*d,p=o.left,v=this.minY+l*d;"number"==typeof s.label.fixed&&(v=v.toFixed(s.label.fixed)),s.line.show&&X(i,[p,f,this.viewWidth+o.left,f],{color:s.line.color,size:s.line.size,dash:s.line.dash}),s.label.show&&(c&&d&&d%c!=0||(s.label.min||v!==this.minY)&&("function"==typeof e.onDrawLabelY&&(v=e.onDrawLabelY.apply(null,[v])),X(i,[p-5,f,p,f],{}),r(i,v.toString(),[o.left-10,f+a.size/2-2],{align:"right",font:a})))}},axisXY(){if(this.options.axis)return this.axisX(),this.arrowX(),this.axisY(),this.arrowY(),this}};class D extends p{constructor(t){if(super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a({},y,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"line"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[],this.options.legend)for(var i of this.data)this.legendItems.push([i.name,i.color]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var o=this.data[e].data;if(Array.isArray(o))for(var[s,a]of o)i.push([s,a])}var[r,n]=v(i,"x"),[l,h]=v(i,"y");return this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:r,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:n,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:l,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:h,this}calcRatio(){this.ratioX=this.viewWidth/(this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY-this.minY)}lines(){var t,i=this,e=this.options,o=h(e.padding),s=this.ctx,a=function(e){var a,r;for(var[n,h]of(t=[],e.data)){var c=Math.floor((n-i.minX)*i.ratioX+o.left),d=Math.floor(i.viewHeight+o.top-(h-i.minY)*i.ratioY);t.push([c,d,n,h])}!1!==e.showLines&&function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:e="#000",size:o=1,dash:s=[]}=arguments.length>2?arguments[2]:void 0;t.beginPath(),t.save(),t.setLineDash(s),t.lineWidth=o,t.strokeStyle=e,i.map((i=>{var[e,o]=i;t.lineTo(e,o)})),t.stroke(),t.restore(),t.closePath()}(s,t,{color:e.color,size:e.size});var f=e.dots?e.dots:{type:"dot"},p={color:null!==(a=f.color)&&void 0!==a?a:e.color,fill:null!==(r=f.fill)&&void 0!==r?r:e.color,radius:f.size||4},v=void 0;switch(f.type){case"square":v=l;break;case"triangle":v=u;break;case"diamond":v=b;break;default:v=g}e.dots&&t.map((t=>{var[i,e]=t;v(s,[i,e,p.radius],p)})),i.coords[e.name]={graph:e,coords:t,drawPointFn:v,opt:p}};for(var r of this.data)a(r)}floatPoint(){var t=this.options,i=this.ctx,e=this.canvas.getBoundingClientRect(),o=!1;if(this.proxy.mouse){var{x:s,y:a}=this.proxy.mouse,r=s-e.left,n=a-e.top;for(var l in this.coords){var h=this.coords[l],c=h.drawPointFn,d=h.opt;for(var[f,p,v,g]of h.coords){var u=+(t.accuracy||d.radius);if(r>f-u&&r<f+u&&n>p-u&&n<p+u){c(i,[f,p,2*d.radius],{color:d.color,fill:d.fill}),t.tooltip&&(this.showTooltip([v,g],h.graph),o=!0);break}}!o&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.lines(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(D.prototype,z),Object.assign(D.prototype,Y);function W(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function P(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,o)}return e}var k={groupDistance:0,barDistance:0,axis:function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?P(Object(e),!0).forEach((function(i){W(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}({},x),dataAxisX:!1,onDrawLabel:null},H=(t,i,e)=>{var[o,s,a,r]=i,{color:n="#000",fill:l="#fff",size:h=1,dash:c=[]}=e;t.beginPath(),t.save(),t.setLineDash(c),t.lineWidth=h,t.strokeStyle=n,t.fillStyle=l,t.rect(o,s,a,r),t.fill(),t.stroke(),t.restore(),t.closePath()};class S extends p{constructor(t,i,e){super(t,i,a({},k,e),"bar"),this.groups=0,this.barWidth=0,this.maxY=0,this.maxX=0,this.minY=0,this.minX=0,this.viewAxis=this.options.dataAxisX?this.viewHeight:this.viewWidth,this.legendItems=[];var o=this.options.legend;if(o&&o.titles&&o.titles.length)for(var s=0;s<o.titles.length;s++)this.legendItems.push([o.titles[s],this.data[0].color.split(",").map((t=>t.trim()))[s]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var o=this.data[e].data;i=[].concat(i,o)}for(var s in this.data)this.data[s].data.length,this.groups++;var[,a]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[Math.min.apply(null,t),Math.max.apply(null,t)]}(i);return this.maxX=this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:a,this}calcRatio(){this.ratio=(this.options.dataAxisX?this.viewWidth:this.viewHeight)/(this.maxY-this.minY)}calcBarWidth(){var t=this.options,i=0;for(var e of this.data)i+=e.data.length;var o=(t.dataAxisX?this.viewHeight:this.viewWidth)-(this.data.length+1)*t.groupDistance-(i-this.data.length)*t.barDistance;// space between bars
this.barWidth=o/i}calcGraphicSize(){var t=this.options,i=0;for(var e of this.date){for(var o=0;o<e.data.length;o++)i+=this.barWidth+t.barDistance;i+=t.groupDistance}i-=t.groupDistance,this.graphicSize=i}barsY(){var t,i,e=this.options,o=h(e.padding),s=this.ctx,a=o.left+e.groupDistance,n=this.viewHeight+o.top,l=this.canvas.getBoundingClientRect(),c=!1;for(var d of(this.proxy.mouse&&(t=this.proxy.mouse.x-l.left,i=this.proxy.mouse.y-l.top),this.data)){for(var f=d.color.split(",").map((t=>t.trim())),p=d.name,v=d.data,g=f.length>1?e.color:f[0],u=0,b=0;b<v.length;b++){var m=v[b]*this.ratio,x=f[b],w=f[b];H(s,[a,n-m,this.barWidth-1,m],{color:x,fill:w}),t>a&&t<a+this.barWidth-1&&i>n-m&&i<n&&(H(s,[a,n-m,this.barWidth-1,m],{color:x,fill:"rgba(255,255,255,.3)"}),e.tooltip&&(this.showTooltip([e.legend.titles?e.legend.titles[b]:p,v[b]],d),c=!0)),u+=this.barWidth+e.barDistance,a+=e.barDistance+this.barWidth}a-=e.barDistance,u-=e.barDistance,"function"==typeof e.onDrawLabel&&(p=e.onDrawLabel.apply(null,p)),r(s,p,[a-u/2,n+20],{align:"center",color:g,stroke:g,font:e.font}),a+=e.groupDistance}!c&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}barsX(){var t,i,e=this.options,o=h(e.padding),s=this.ctx,a=this.canvas.getBoundingClientRect();for(var r of(this.proxy.mouse&&(this.proxy.mouse.x,a.left,this.proxy.mouse.y,a.top),t=o.left,i=o.top+e.groupDistance,this.data)){var n=r.color.split(",").map((t=>t.trim())),l=r.name,c=r.data;n.length>1?e.color:n[0];for(var d=0;d<c.length;d++){var f=c[d]*this.ratio,p=n[d],v=n[d];H(s,[t,i,t+f-o.right,this.barWidth],{color:p,fill:v}),this.barWidth+e.barDistance,i+=e.barDistance+this.barWidth}i-=e.barDistance,e.barDistance,"function"==typeof e.onDrawLabel&&(l=e.onDrawLabel.apply(null,l)),// drawText(ctx, name, [px - groupWidth / 2, py + 20], {
//     align: 'center', color: labelColor, stroke: labelColor, font: o.font
// })
i+=e.groupDistance}this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}draw(){var t=this.options;super.draw(),this.calcBarWidth(),this.calcRatio(),t.dataAxisX?(this.axisX(),this.barsX()):(this.axisY(),this.barsY()),this.arrowY(),this.arrowX(),this.legend()}}Object.assign(S.prototype,Y);var T={other:{color:"#eaeaea"},labels:{font:e,color:"#fff"},showValue:!1,holeSize:0,legend:{vertical:!0},onDrawValue:null},L=(t,i,e)=>{var[o,s,a=4,r,n]=i,{color:l="#000",fill:h="#fff",size:c=1}=e;t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=c,t.strokeStyle=l,t.fillStyle=h,t.arc(o,s,a,r,n),t.lineTo(o,s),t.fill(),t.stroke(),t.restore(),t.closePath()};class M extends p{constructor(t,i,e){if(super(t,i,a({},T,e),"pie"),this.center=[this.dpiWidth/2,this.dpiHeight/2],this.total=this.data.reduce(((t,i)=>t+i.data),0),this.legendItems=[],this.options.legend&&this.data.length)for(var o=0;o<this.data.length;o++)this.legendItems.push([this.data[o].name,this.data[o].color]);this.resize()}sectors(){var t,i,e=this.ctx,o=this.options,s=h(o.padding),[a,l]=this.center,c=this.viewHeight>this.viewWidth?this.viewWidth/2-(s.left+s.right):this.viewHeight/2-(s.top+s.bottom),d=0,f=360,p=0,v="",u="";for(var b of this.data)f=2*Math.PI*b.data/this.total,L(e,[a,l,c,d,d+f],{fill:b.color,color:b.color}),d+=f;for(var m of(o.holeSize&&g(e,[a,l,o.holeSize],{color:"#fff"}),d=0,this.data)){f=2*Math.PI*m.data/this.total,p=o.holeSize/2,v=Math.round(100*m.data/this.total),u=o.showValue?m.data:v+"%","function"==typeof o.onDrawValue&&(u=o.onDrawValue.apply(null,[m.data,v,u])),t=a+(c/2+p)*Math.cos(d+f/2),i=l+(c/2+p)*Math.sin(d+f/2);var x=n(e,[v+"%"],{font:o.labels.font});r(e,u,[t-x/2,i+o.labels.font.size/2],{color:o.labels.color,font:o.labels.font}),d+=f}}legend(){return!0===this.options.legend.vertical?super.legendVertical():super.legend()}draw(){super.draw(),this.sectors(),this.legend()}resize(){super.resize(),this.center=[this.dpiWidth/2,this.dpiHeight/2]}}var O={axis:x,cross:w};class N extends p{constructor(t,i,e){if(super(t,i,a({},O,e)),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.minZ=0,this.maxZ=0,this.legendItems=[],this.options.legend)for(var o of this.data)this.legendItems.push([o.name,o.color]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var o=this.data[e].data;Array.isArray(o)&&i.push(o)}var[s,a]=v(i,"x"),[r,n]=v(i,"y"),[l,h]=v(i,"z");this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:s,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:a,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:r,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:n,this.minZ=t.boundaries&&!isNaN(t.boundaries.minZ)?t.boundaries.minZ:l,this.maxZ=t.boundaries&&!isNaN(t.boundaries.maxZ)?t.boundaries.maxZ:h}calcRatio(){this.ratioX=this.viewWidth/(this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY-this.minY),this.ratioZ=this.maxZ/(this.maxZ-this.minZ)}lines(){var t=this.options,i=h(t.padding),e=this.ctx;for(var o of this.data){var[s,a,r]=o.data,n=Math.floor((s-this.minX)*this.ratioX+i.left),l=Math.floor(this.viewHeight+i.top-(a-this.minY)*this.ratioY),c=Math.floor(r*this.ratioZ);g(e,[n,l,c],{fill:o.color,color:o.color})}}floatPoint(){}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.lines(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(N.prototype,z),Object.assign(N.prototype,Y),globalThis.chart={lineChart:(t,i,e)=>new D(t,i,e),barChart:(t,i,e)=>new S(t,i,e),pieChart:(t,i,e)=>new M(t,i,e)}}();
