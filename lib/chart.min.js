/*! 
 * MetroUI :: ChartJS - Create different charts in js
 * https://pimenov.com.ua
 *
 * Copyright 2021 Serhii Pimenov
 * Released under the MIT license
 */
!function(){"use strict";var t={width:1,lineType:"solid",color:"#e3e3e3",radius:0},i={style:"normal",family:"Helvetica, sans-serif",size:12,weight:"normal",lineHeight:1.2,color:"#000"},e=Object.assign({},i,{weight:"bold"}),a={dpi:1,height:200,width:"100%",padding:{top:40,bottom:40,left:40,right:40},margin:{top:0,bottom:0,left:0,right:0},background:"#fff",color:"#000",font:i,border:t,title:{display:!0,align:"center",
// start, center, end
rtl:!1,color:"#000",text:"",font:Object.assign({},i,{weight:"bold",size:24}),padding:{top:10,bottom:10,left:10,right:10}},legend:{rtl:!1,margin:{top:20,left:0,right:0,bottom:0},padding:{top:0,left:0,right:0,bottom:0},font:e,border:t,dash:[],color:"#fff",vertical:!1,position:"top-left"},tooltip:{width:"auto",background:"#fff",color:"#000",font:i,border:t,padding:{top:10,bottom:10,left:10,right:10},shadow:{shiftX:2,shiftY:2,blur:4,stretch:0,color:"rgba(0,0,0,.5)"}},boundaries:!1,accuracy:2,colors:Object.values({aliceBlue:"#f0f8ff",antiqueWhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedAlmond:"#ffebcd",blue:"#0000ff",blueViolet:"#8a2be2",brown:"#a52a2a",burlyWood:"#deb887",cadetBlue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerBlue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkBlue:"#00008b",darkCyan:"#008b8b",darkGoldenRod:"#b8860b",darkGray:"#a9a9a9",darkGreen:"#006400",darkKhaki:"#bdb76b",darkMagenta:"#8b008b",darkOliveGreen:"#556b2f",darkOrange:"#ff8c00",darkOrchid:"#9932cc",darkRed:"#8b0000",darkSalmon:"#e9967a",darkSeaGreen:"#8fbc8f",darkSlateBlue:"#483d8b",darkSlateGray:"#2f4f4f",darkTurquoise:"#00ced1",darkViolet:"#9400d3",deepPink:"#ff1493",deepSkyBlue:"#00bfff",dimGray:"#696969",dodgerBlue:"#1e90ff",fireBrick:"#b22222",floralWhite:"#fffaf0",forestGreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#DCDCDC",ghostWhite:"#F8F8FF",gold:"#ffd700",goldenRod:"#daa520",gray:"#808080",green:"#008000",greenYellow:"#adff2f",honeyDew:"#f0fff0",hotPink:"#ff69b4",indianRed:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderBlush:"#fff0f5",lawnGreen:"#7cfc00",lemonChiffon:"#fffacd",lightBlue:"#add8e6",lightCoral:"#f08080",lightCyan:"#e0ffff",lightGoldenRodYellow:"#fafad2",lightGray:"#d3d3d3",lightGreen:"#90ee90",lightPink:"#ffb6c1",lightSalmon:"#ffa07a",lightSeaGreen:"#20b2aa",lightSkyBlue:"#87cefa",lightSlateGray:"#778899",lightSteelBlue:"#b0c4de",lightYellow:"#ffffe0",lime:"#00ff00",limeGreen:"#32dc32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumAquaMarine:"#66cdaa",mediumBlue:"#0000cd",mediumOrchid:"#ba55d3",mediumPurple:"#9370db",mediumSeaGreen:"#3cb371",mediumSlateBlue:"#7b68ee",mediumSpringGreen:"#00fa9a",mediumTurquoise:"#48d1cc",mediumVioletRed:"#c71585",midnightBlue:"#191970",mintCream:"#f5fffa",mistyRose:"#ffe4e1",moccasin:"#ffe4b5",navajoWhite:"#ffdead",navy:"#000080",oldLace:"#fdd5e6",olive:"#808000",oliveDrab:"#6b8e23",orange:"#ffa500",orangeRed:"#ff4500",orchid:"#da70d6",paleGoldenRod:"#eee8aa",paleGreen:"#98fb98",paleTurquoise:"#afeeee",paleVioletRed:"#db7093",papayaWhip:"#ffefd5",peachPuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderBlue:"#b0e0e6",purple:"#800080",rebeccaPurple:"#663399",red:"#ff0000",rosyBrown:"#bc8f8f",royalBlue:"#4169e1",saddleBrown:"#8b4513",salmon:"#fa8072",sandyBrown:"#f4a460",seaGreen:"#2e8b57",seaShell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",slyBlue:"#87ceeb",slateBlue:"#6a5acd",slateGray:"#708090",snow:"#fffafa",springGreen:"#00ff7f",steelBlue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whiteSmoke:"#f5f5f5",yellow:"#ffff00",yellowGreen:"#9acd32"}),onDrawLabelY:null,onDrawLabelX:null,onTooltipShow:null,onHover:null,onLeave:null};
/**
     * Simple object check.
     * @param item
     * @returns {boolean}
     */
function s(t){return t&&"object"==typeof t&&!Array.isArray(t)}
/**
     * Deep merge two objects.
     * @param target
     * @param ...sources
     */function o(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),a=1;a<i;a++)e[a-1]=arguments[a];if(!e.length)return t;var r=e.shift();if(s(t)&&s(r))for(var h in r)s(r[h])?(t[h]||Object.assign(t,{[h]:{}}),o(t[h],r[h])):Object.assign(t,{[h]:r[h]});return o(t,...e)}var r=function(t,i,e){var[a,s]=e,{align:o="left",color:r="#000",stroke:h="#000",font:n,angle:l=0,translate:d=[0,0]}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{style:c="normal",weight:f="normal",size:p=12,lineHeight:u=1,family:g="sans-serif"}=n,m=0,v=0;"number"==typeof d?m=v=d:Array.isArray(d)&&([m,v]=d),t.save(),t.beginPath(),t.textAlign=o,t.fillStyle=r,t.strokeStyle=h,t.font="".concat(c," ").concat(f," ").concat(p,"px/").concat(u," ").concat(g),t.translate(m,v),t.rotate(l),t.textBaseline="middle";var b=i.toString().split("\n");b.map(((i,e)=>{t.fillText(i,a,s+s*e*u)})),t.closePath(),t.restore()},h=(t,i,e)=>{var a,{font:s=null}=e,o=0;if(t.save(),s){var{style:r="normal",weight:h="normal",size:n=12,lineHeight:l=1.2,family:d="sans-serif"}=s;t.font="".concat(r," ").concat(h," ").concat(n,"px/").concat(l," ").concat(d)}for(var c=0;c<i.length;c++)(a=t.measureText(i[c][0]).width)>o&&(o=a);return t.restore(),o},n=function(t,i){var[e,a,s]=i,{color:o="#000",fill:r="#fff",size:h=1,dash:n=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(n),t.lineWidth=h,t.strokeStyle=o,t.fillStyle=r,t.rect(e-s,a-s,2*s,2*s),t.fill(),t.stroke(),t.restore(),t.closePath()},l=t=>"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t,d=t=>"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t,c={legend(){return!0===this.options.legend.vertical?this.legendVertical():this.legendHorizontal()},legendHorizontal(){var t,i,e,a,o=this.options,c=l(o.padding),f=o.legend,p=l(f.padding),u=d(f.margin),g=this.ctx,m=this.legendItems,v=0;if(f&&s(f)&&m&&Array.isArray(m)&&m.length){a=f.font.size/2,t=f.font.size*f.font.lineHeight,e=c.top+this.viewHeight+f.font.size+p.top+u.top,i=c.left+p.left+u.left;for(var b=0;b<m.length;b++){var[x]=m[b];v+=h(g,[[x]],{font:f.font})+2*a+5}v=(this.viewWidth-v)/2;for(var w=0;w<m.length;w++){var[y,X]=m[w],Y=h(g,[[y]],{font:f.font});i+Y>this.viewWidth&&(i=c.left+p.left+u.left,e+=t),n(g,[v+i,e,a],{color:X,fill:X}),r(g,y,[v+i+a+5,e+a/2],{color:f.font.color,stroke:f.font.color,font:o.font}),i+=a+Y+20}}},legendVertical(){var t,i,e,a,o,c,f=this.options,p=f.legend,u=null!==(t=p.font)&&void 0!==t?t:f.font,g=u.size/2,m=this.ctx,v=this.legendItems,b=l(p.padding),x=d(p.margin),w=l(f.padding);if(p&&s(p)&&v&&Array.isArray(v)&&v.length){i=u.size*u.lineHeight,o=h(m,v,{font:u})+b.left+b.right+3*g+5,c=v.length*i+b.top+b.bottom+5,"top-left"===p.position?(e=w.left+x.left,a=w.top+x.top):"top-right"===p.position?(e=this.dpiWidth-o-x.right-w.right,a=w.top+x.top):"bottom-left"===p.position?(e=w.left+x.left,a=this.dpiHeight-c-w.bottom+x.bottom):(e=this.dpiWidth-o-x.right-w.right,a=this.dpiHeight-c-w.bottom+x.bottom),function(t,i){var[e,a,s,o]=i,{color:r="#fff",borderColor:h="#000",dash:n=[],size:l=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.save(),t.beginPath(),t.strokeStyle=h,t.fillStyle=r,t.setLineDash(n),t.lineWidth=l,t.clearRect(e,a,s,o),t.fillRect(e,a,s,o),l&&t.strokeRect(e,a,s,o),t.closePath(),t.restore()}(m,[e,a,o,c],{color:p.color,dash:p.dash,size:p.border.width,borderColor:p.border.color}),e+=g+5+b.left,a+=g+5+b.top;for(var y=0;y<v.length;y++){var[X,Y]=v[y];n(m,[e,a,g],{color:Y,fill:Y}),r(m,X,[e+g+5,a+1],{color:f.font.color,stroke:f.font.color,font:p.font}),a+=i}}}},f={showTooltip(t,i){var e=this.options;if(this.tooltip&&(this.tooltip.remove(),this.tooltip=null),e.tooltip){var{x:a,y:s}=this.proxy.mouse,o=document.createElement("div"),r=e.onTooltipShow,h=e.tooltip.font,n=e.tooltip.shadow,d=e.tooltip.border,c=l(e.tooltip.padding);o.style.position="fixed",o.style.border="".concat(d.width,"px ").concat(d.lineType," ").concat(d.color),o.style.borderRadius="".concat(d.radius),o.style.padding="".concat(c.top,"px ").concat(c.right,"px ").concat(c.bottom,"px ").concat(c.left,"px"),o.style.background="".concat(e.tooltip.background),o.style.font="".concat(h.style," ").concat(h.weight," ").concat(h.size,"px/").concat(h.lineHeight," ").concat(h.family),o.style.boxShadow="".concat(n.shiftX,"px ").concat(n.shiftY,"px ").concat(n.blur,"px ").concat(n.color),o.innerHTML=r&&"function"==typeof r?r.apply(null,[t,i]):t,document.querySelector("body").appendChild(o),o.style.top="".concat(s-o.clientHeight-15,"px"),o.style.left="".concat(a-o.clientWidth/2-5,"px"),this.tooltip=o}}};class p{constructor(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown";if(this.el=document.querySelector(t),!this.el)throw new Error("You must define a selector for chart wrapper element!");this.options=o({},a,e),this.data=i,this.canvas=null,this.ctx=null,this.raf=null,this.tooltip=null,this.legendItems=[],this.chartType=s,this.rect=this.el.getBoundingClientRect(),this.canvasRect=null;var r=this;this.proxy=new Proxy({},{set(){var t=Reflect.set(...arguments);return r.raf=requestAnimationFrame(r.draw.bind(r)),t}}),this.options.border&&(this.el.style.border="".concat(this.options.border.width,"px ").concat(this.options.border.lineType," ").concat(this.options.border.color)),this.calcInternalValues(),this.createCanvas(),this.addEvents()}createCanvas(){this.canvas=document.createElement("canvas"),this.el.innerHTML="",this.el.style.overflow="hidden",this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.setCanvasSize(),this.canvasRect=this.canvas.getBoundingClientRect()}setCanvasSize(){var t=this.options;this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=t.dpi*this.width,this.canvas.height=t.dpi*this.height}calcInternalValues(){var t,i,e=this.options,a=l(e.padding),s=this.el.getBoundingClientRect(),{width:o,height:r}=s;t=e.width.toString().includes("%")?o/100*parseInt(e.width):+e.width,i=e.height.toString().includes("%")?r/100*parseInt(e.height):+e.height,this.width=t,this.height=i,this.dpiHeight=e.dpi*i,this.dpiWidth=e.dpi*t,this.viewHeight=this.dpiHeight-(a.top+a.bottom),this.viewWidth=this.dpiWidth-(a.left+a.right)}title(){var t,i=this.options.title,e=this.ctx;if(i&&i.text){var{text:a,align:s,color:o,font:h}=i;switch(s){case"center":t=this.dpiWidth/2;break;case"right":t=this.dpiWidth-5;break;default:t=5}r(e,a,[t,h.size+5],{align:i.align,color:i.color,stroke:i.color,font:i.font})}}draw(){this.clear(),this.title()}clear(){this.ctx.clearRect(0,0,this.dpiWidth,this.dpiHeight)}setData(t,i){void 0!==i?this.data[i].data=t:this.data=t,this.draw()}mouseMove(t){var i=this.options.onHover,{clientX:e,clientY:a}=t;"function"==typeof i&&i.apply(null,[e,a]),this.proxy.mouse={x:e,y:a}}mouseLeave(){var t=this.options.onLeave;"function"==typeof t&&t.apply(null,[]),this.proxy.mouse=null}resize(){this.calcInternalValues(),this.setCanvasSize(),this.rect=this.el.getBoundingClientRect(),this.canvasRect=this.canvas.getBoundingClientRect(),this.draw()}addEvents(){var t=this.canvas;t.addEventListener("mousemove",this.mouseMove.bind(this)),t.addEventListener("mouseleave",this.mouseLeave.bind(this)),window.addEventListener("resize",this.resize.bind(this))}destroy(){var t=this.canvas;cancelAnimationFrame(this.raf),t.removeEventListener("mousemove",this.mouseMove.bind(this)),t.removeEventListener("mouseleave",this.mouseLeave.bind(this)),window.removeEventListener("resize",this.resize.bind(this))}}Object.assign(p.prototype,c),Object.assign(p.prototype,f);var u={arrow:{color:"#000",size:1,dash:[],factorX:5,factorY:5},line:{color:"#e3e3e3",size:1,dash:[],count:5,show:!0},label:{color:"#000",font:e,count:5,
// odd, even, num
show:!0,first:!0,last:!0,fixed:!1}},g={x:u,y:u},m={size:1,color:"#bbb",dash:[5,3]},v={axis:g,cross:m,showDots:!0},b=function(){var t,i,e,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";if("number"==typeof o)a=o;else switch(o.toString().toLowerCase()){case"y":a=1;break;case"z":a=2;break;default:a=0}for(var r of s)e=r[a],(isNaN(t)||t>e)&&(t=e),(isNaN(i)||i<e)&&(i=e);return[t,i]},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[Math.min.apply(null,t),Math.max.apply(null,t)]},w=function(t,i){var[e,a,s]=i,{color:o="#000",fill:r="#fff",size:h=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=h,t.strokeStyle=o,t.fillStyle=r,t.arc(e,a,s,0,2*Math.PI),t.fill(),t.stroke(),t.restore(),t.closePath()},y=function(t,i){var[e,a,s]=i,{color:o="#000",fill:r="#fff",size:h=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=h,t.strokeStyle=o,t.fillStyle=r,t.moveTo(e,a-s),t.lineTo(e+s,a+s),t.lineTo(e-s,a+s),t.lineTo(e,a-s),t.fill(),t.stroke(),t.restore(),t.closePath()},X=function(t,i){var[e,a,s]=i,{color:o="#000",fill:r="#fff",size:h=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=h,t.strokeStyle=o,t.fillStyle=r,t.moveTo(e,a-s),t.lineTo(e+s,a),t.lineTo(e,a+s),t.lineTo(e-s,a),t.lineTo(e,a-s),t.fill(),t.stroke(),t.restore(),t.closePath()},Y={cross(){var t=this.options,i=t.cross,e=l(t.padding),a=this.ctx,s=this.canvas.getBoundingClientRect();if(t.cross&&(!t.cross||this.proxy.mouse)){var{x:o,y:r}=this.proxy.mouse;o-=s.left,r-=s.top,o-e.left+1<0||o>this.viewWidth+e.left+1||r-e.top+1<0||r>this.viewHeight+e.top+1||(a.beginPath(),a.setLineDash(t.cross.dash),a.lineWidth=i.size,a.strokeStyle=i.color,// vertical line
a.moveTo(o,e.top),a.lineTo(o,this.viewHeight+e.top),// Horizontal line
a.moveTo(e.left,r),a.lineTo(this.viewWidth+e.left,r),a.arc(o,r,10,0,2*Math.PI),a.stroke(),a.closePath())}}},k=function(t,i){var[e,a,s,o]=i,{color:r="#000",size:h=1,dash:n=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(n),t.lineWidth=h,t.strokeStyle=r,t.moveTo(e,a),t.lineTo(s,o),t.stroke(),t.restore(),t.closePath()},N={arrowX(){var t=this.options,i=this.ctx,e=l(t.padding),a=e.left,s=this.viewHeight+e.top,o=a+this.viewWidth,r=s;if(t.axis.x.arrow){var h=t.axis.x.arrow;!function(t,i){var[e,a,s,o,r,h]=i,{color:n="#000",dash:l=[],size:d=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.strokeStyle=n,t.lineWidth=d,t.setLineDash(l),t.moveTo(e,a),t.lineTo(s,o),t.moveTo(s,o),t.lineTo(s-r,o-h),t.moveTo(s,o),t.lineTo(s-r,o+h),t.stroke(),t.closePath()}(i,[a,s,o,r,h.factorX,h.factorY],{color:h.color,size:h.size,dash:h.dash})}},axisX(){var t,i=this.ctx,e=this.options,a=l(e.padding);if(e.axis.x)for(var s=e.axis.x,o=null!==(t=s&&s.label&&s.label.font)&&void 0!==t?t:e.font,h=this.viewWidth/s.line.count,n=(this.maxX-this.minX)/s.line.count,d=Math.round(s.line.count/s.label.count),c=0;c<=s.line.count;c++){var f,p,u=h*c+a.left,g=this.minX+n*c;"number"==typeof s.label.fixed&&(g=g.toFixed(s.label.fixed)),s.line.show&&k(i,[u,a.top,u,this.viewHeight+a.top],{color:s.line.color,size:s.line.size,dash:s.line.dash}),s.label.show&&(d&&c&&c%d!=0||(s.label.first||0!==c)&&(s.label.last||c!==s.line.count)&&("function"==typeof e.onDrawLabelX&&(g=e.onDrawLabelX.apply(null,[g])),// if (x + ctx.measureText(labelXValue.toString()).width > this.viewWidth) continue
k(i,[u,this.viewHeight+a.top,u,this.viewHeight+a.top+5],{color:null!==(f=s.arrow&&s.arrow.color)&&void 0!==f?f:s.line.color}),r(i,g.toString(),[u,this.viewHeight+a.top+o.size+5],{color:null!==(p=s.label&&s.label.color)&&void 0!==p?p:e.color,align:"center",font:o})))}},arrowY(){var t=this.options,i=this.ctx,e=l(t.padding),a=e.left,s=this.viewHeight+e.top,o=a,r=e.top;if(t.axis.y.arrow){var h=t.axis.y.arrow;!function(t,i){var[e,a,s,o,r,h]=i,{color:n="#000",dash:l=[],size:d=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.strokeStyle=n,t.lineWidth=d,t.setLineDash(l),t.moveTo(e,a),t.lineTo(s,o),t.moveTo(s,o),t.lineTo(s-r,o+h),t.moveTo(s,o),t.lineTo(s+r,o+h),t.stroke(),t.closePath()}(i,[a,s,o,r,h.factorX,h.factorY],{color:h.color,size:h.size,dash:h.dash})}},axisY(){var t,i=this.ctx,e=this.options,a=l(e.padding);if(e.axis.y)for(var s=e.axis.y,o=null!==(t=s&&s.label&&s.label.font)&&void 0!==t?t:e.font,h=this.viewHeight/s.line.count,n=(this.maxY-this.minY)/s.line.count,d=Math.floor(s.line.count/s.label.count),c=0;c<s.line.count+1;c++){var f,p,u=this.viewHeight+a.top-h*c,g=a.left,m=this.minY+n*c;"number"==typeof s.label.fixed&&(m=m.toFixed(s.label.fixed)),s.line.show&&k(i,[g,u,this.viewWidth+a.left,u],{color:s.line.color,size:s.line.size,dash:s.line.dash}),s.label.show&&(d&&c&&c%d!=0||(s.label.first||0!==c)&&(s.label.last||c!==s.line.count)&&("function"==typeof e.onDrawLabelY&&(m=e.onDrawLabelY.apply(null,[m])),k(i,[g-5,u,g,u],{color:null!==(f=s.arrow&&s.arrow.color)&&void 0!==f?f:s.line.color}),r(i,m.toString(),[a.left-10,u+1],{color:null!==(p=s.label&&s.label.color)&&void 0!==p?p:e.color,align:"right",font:o})))}},axisXY(){if(this.options.axis)return this.axisX(),this.arrowX(),this.axisY(),this.arrowY(),this}},z={addPoint(t,i){var e,[a,s]=i,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.options;this.data&&this.data.length&&(e=this.data[t].data,o&&(r.graphSize?e.length===r.graphSize&&(e=e.slice(1)):e=e.slice(1)),this.data[t].data=e,this.data[t].data.push([a,s]),this.calcMinMax(),this.calcRatio(),this.resize())}},W=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:e="#000",size:a=1,dash:s=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(s),t.lineWidth=a,t.strokeStyle=e,i.map((i=>{var[e,a]=i;t.lineTo(e,a)})),t.stroke(),t.restore(),t.closePath()};class D extends p{constructor(t){if(super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o({},v,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"area"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[],this.options.legend)for(var i=0;i<this.data.length;i++)this.legendItems.push([this.data[i].name,this.options.colors[i]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var a=this.data[e].data;if(Array.isArray(a))for(var[s,o]of a)i.push([s,o])}var[r,h]=b(i,"x"),[n,l]=b(i,"y");this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:r,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:h,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:n,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:l,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}areas(){var t,i=this,e=this.options,a=l(e.padding),s=this.ctx;if(this.data&&this.data.length)for(var o=function(o){var r,h,l,d,c,f=i.data[o],p=null!==(r=f.color)&&void 0!==r?r:e.colors[o],u=null!==(h=f.fill)&&void 0!==h?h:p;for(var[g,m]of((t=[]).push([a.left,i.viewHeight+a.top,0,0]),f.data)){var v=Math.floor((g-i.minX)*i.ratioX+a.left),b=Math.floor(i.viewHeight+a.top-(m-i.minY)*i.ratioY);t.push([v,b,g,m])}t.push([t[t.length-1][0],i.viewHeight+a.top,0,0]),!1!==f.showLines&&W(s,t,{color:p,fill:u,size:f.size}),function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:e="#000",fill:a="#000",size:s=1,dash:o=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(o),t.lineWidth=s,t.strokeStyle=e,t.fillStyle=a,i.map((i=>{var[e,a]=i;t.lineTo(e,a)})),t.lineTo(i[0][0],i[0][1]),t.fill(),t.restore(),t.closePath()}(s,t,{color:p,fill:u,size:f.size});var x=f.dots?f.dots:{type:"dot"},Y={color:null!==(l=x.color)&&void 0!==l?l:p,fill:null!==(d=x.fill)&&void 0!==d?d:p,radius:null!==(c=x.size)&&void 0!==c?c:4},k=void 0;switch(x.type){case"square":k=n;break;case"triangle":k=y;break;case"diamond":k=X;break;default:k=w}f.dots&&!1!==e.showDots&&t.map((t=>{var[i,e]=t;k(s,[i,e,Y.radius],Y)})),i.coords[f.name]={graph:f,coords:t,drawPointFn:k,opt:Y}},r=0;r<this.data.length;r++)o(r)}floatPoint(){var t=this.options,i=this.ctx,e=this.canvas.getBoundingClientRect(),a=!1;if(this.data&&this.data.length&&this.proxy.mouse){var{x:s,y:o}=this.proxy.mouse,r=s-e.left,h=o-e.top;for(var n in this.coords){var l=this.coords[n],d=l.drawPointFn,c=l.opt;for(var[f,p,u,g]of l.coords){var m=+(t.accuracy||c.radius),v=f-m,b=f+m,x=p-m,w=p+m;if(r>v&&r<b&&"default"!==t.hoverMode&&d(i,[f,p,c.radius],{color:c.color,fill:c.fill}),r>v&&r<b&&h>x&&h<w){"default"===t.hoverMode&&d(i,[f,p,2*c.radius],{color:c.color,fill:c.fill}),t.tooltip&&(this.showTooltip([u,g],l.graph),a=!0);break}}!a&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.areas(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(D.prototype,Y),Object.assign(D.prototype,N),Object.assign(D.prototype,z);function M(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function S(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}function P(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?S(Object(e),!0).forEach((function(i){M(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):S(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var T={groupDistance:0,barDistance:0,axis:P({},g),dataAxisX:!1,labels:{font:e,color:"#000"},onDrawLabel:null},H=function(t,i){var[e,a,s,o]=i,{color:r="#000",fill:h="#fff",size:n=1,dash:l=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(l),t.lineWidth=n,t.strokeStyle=r,t.fillStyle=h,t.rect(e,a,s,o),t.fill(),t.stroke(),t.restore(),t.closePath()};class L extends p{constructor(t,i,e){super(t,i,o({},T,e),"bar"),this.groups=0,this.barWidth=0,this.maxY=0,this.maxX=0,this.minY=0,this.minX=0,this.viewAxis=this.options.dataAxisX?this.viewHeight:this.viewWidth,this.legendItems=[];var a=this.options.legend;if(a&&a.titles&&a.titles.length)for(var s=0;s<a.titles.length;s++)this.legendItems.push([a.titles[s],this.options.colors[s]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var a=this.data[e].data;i=[].concat(i,a)}for(var s in this.data)this.data[s].data.length,this.groups++;var[,o]=x(i);this.maxX=this.maxY=t.boundaries&&!isNaN(t.boundaries.max)?t.boundaries.max:o,isNaN(this.maxX)&&(this.maxX=100),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratio=(this.options.dataAxisX?this.viewWidth:this.viewHeight)/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}calcBarWidth(){var t=this.options,i=0;for(var e of this.data)i+=e.data.length;var a=(t.dataAxisX?this.viewHeight:this.viewWidth)-(this.data.length+1)*t.groupDistance-(i-this.data.length)*t.barDistance;// space between bars
this.barWidth=a/i}barsY(){var t,i,e=this.options,a=l(e.padding),s=this.ctx,o=a.left+e.groupDistance,h=this.viewHeight+a.top,n=this.canvas.getBoundingClientRect(),d=!1;if(this.data&&this.data.length){this.proxy.mouse&&(t=this.proxy.mouse.x-n.left,i=this.proxy.mouse.y-n.top);for(var c=0;c<this.data.length;c++){for(
// let colors = graph.color.split(",").map( c => c.trim() )
var f=this.data[c],p=f.data,u=e.labels.color,g=f.name,m=0,v=0;v<p.length;v++){var b=p[v]*this.ratio,x=1===p.length?e.colors[c]:e.colors[v],w=x;H(s,[o,h-b,this.barWidth-1,b],{color:x,fill:w}),t>o&&t<o+this.barWidth-1&&i>h-b&&i<h&&(H(s,[o,h-b,this.barWidth-1,b],{color:x,fill:"rgba(255,255,255,.3)"}),e.tooltip&&(this.showTooltip([e.legend.titles?e.legend.titles[v]:g,p[v]],f),d=!0)),m+=this.barWidth+e.barDistance,o+=e.barDistance+this.barWidth}o-=e.barDistance,m-=e.barDistance,"function"==typeof e.onDrawLabel&&(g=e.onDrawLabel.apply(null,g)),r(s,g,[o-m/2,h+20],{align:"center",color:u,stroke:u,font:e.font}),o+=e.groupDistance}!d&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}barsX(){var t,i,e,a,s=this.options,o=l(s.padding),h=this.ctx,n=this.canvas.getBoundingClientRect(),d=!1;this.proxy.mouse&&(e=this.proxy.mouse.x-n.left,a=this.proxy.mouse.y-n.top),t=o.left,i=o.top+s.groupDistance;for(var c=0;c<this.data.length;c++){for(
// let colors = graph.color.split(",").map( c => c.trim() )
var f=this.data[c],p=f.data,u=s.labels.color,g=f.name,m=0,v=0;v<p.length;v++){var b=p[v]*this.ratio,x=1===p.length?s.colors[c]:s.colors[v],w=x;H(h,[t,i,t+b-o.right,this.barWidth],{color:x,fill:w}),e>t&&e<t+b&&a>i&&a<i+this.barWidth&&(H(h,[t,i,t+b-o.right,this.barWidth],{color:x,fill:"rgba(255,255,255,.3)"}),s.tooltip&&(this.showTooltip([s.legend.titles?s.legend.titles[v]:g,p[v]],f),d=!0)),m+=this.barWidth+s.barDistance,i+=s.barDistance+this.barWidth}i-=s.barDistance,m-=s.barDistance,"function"==typeof s.onDrawLabel&&(g=s.onDrawLabel.apply(null,g)),r(h,g,[0,0],{align:"center",color:u,stroke:u,font:s.font,angle:Math.PI/2,translate:[t-20,i-m/2]}),i+=s.groupDistance}!d&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}draw(){var t=this.options;super.draw(),this.calcBarWidth(),this.calcRatio(),t.dataAxisX?(this.axisX(),this.barsX()):(this.axisY(),this.barsY()),this.arrowY(),this.arrowX(),this.legend()}}Object.assign(L.prototype,N);var R={axis:g,cross:m};class O extends p{constructor(t,i,e){if(super(t,i,o({},R,e),"bubble"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.minZ=0,this.maxZ=0,this.legendItems=[],this.options.legend)for(var a=0;a<this.data.length;a++)this.legendItems.push([this.data[a].name,this.options.colors[a]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var a=this.data[e].data;Array.isArray(a)&&i.push(a)}var[s,o]=b(i,"x"),[r,h]=b(i,"y"),[n,l]=b(i,"z");this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:s,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:o,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:r,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:h,this.minZ=t.boundaries&&!isNaN(t.boundaries.minZ)?t.boundaries.minZ:n,this.maxZ=t.boundaries&&!isNaN(t.boundaries.maxZ)?t.boundaries.maxZ:l,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100),isNaN(this.minZ)&&(this.minX=0),isNaN(this.maxZ)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY),this.ratioZ=this.maxZ/(this.maxZ===this.minZ?this.maxZ:this.maxZ-this.minZ)}lines(){var t=this.options,i=l(t.padding),e=this.ctx;if(this.data&&this.data.length)for(var a=0;a<this.data.length;a++){var s=this.data[a],o=t.colors[a],[r,h,n]=s.data,d=Math.floor((r-this.minX)*this.ratioX+i.left),c=Math.floor(this.viewHeight+i.top-(h-this.minY)*this.ratioY),f=Math.floor(n*this.ratioZ);w(e,[d,c,f],{fill:o,color:o})}}floatPoint(){this.data&&this.data.length}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.lines(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(O.prototype,Y),Object.assign(O.prototype,N);var B={barWidth:10,axis:g,cross:m,graphSize:40,bars:{stroke:"#fff"}},C={addTriplet(t,i){var e,[a,s,o]=i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],h=this.options;this.data&&this.data.length&&(e=this.data[t].data,r&&(e=(h.graphSize&&(e.length,h.graphSize),e.slice(1))),this.data[t].data=e,this.data[t].data.push([a,s,o]),this.calcMinMax(),this.calcRatio(),this.resize())}};class A extends p{constructor(t){if(super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o({},B,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"histogram"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[],this.options.legend)for(var i=0;i<this.data.length;i++)this.legendItems.push([this.data[i].name,this.options.colors[i]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var a=this.data[e].data;if(Array.isArray(a))for(var[s,o,r]of a)i.push([s,o,r])}var[h,n]=b(i,0),[l,d]=b(i,1),[c,f]=b(i,2);this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:Math.min(h,l),this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:Math.max(n,d),this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:c,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:f,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}bars(){var t=this.options,i=l(t.padding),e=this.ctx;if(this.data&&this.data.length)for(var a=0;a<this.data.length;a++){var s=this.data[a],o=t.colors[a],r=s.stroke||t.bars.stroke;for(var[h,n,d]of s.data){var c=Math.floor((h-this.minX)*this.ratioX+i.left),f=Math.floor((n-this.minX)*this.ratioX+i.left),p=(d-this.minY)*this.ratioY,u=Math.floor(this.viewHeight+i.top-p);H(e,[c,u,f-c,p],{fill:o,color:r})}}}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.bars(),this.cross(),this.legend()}}Object.assign(A.prototype,Y),Object.assign(A.prototype,N),Object.assign(A.prototype,C);var j={hoverMode:"default",
// default, advanced
axis:g,cross:m,showDots:!0,type:"line"},I="line",G="default";class Z extends p{constructor(t){if(super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o({},j,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"line"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[],this.options.legend)for(var i=0;i<this.data.length;i++)this.legendItems.push([this.data[i].name,this.options.colors[i]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var a=this.data[e].data;if(Array.isArray(a))for(var[s,o]of a)i.push([s,o])}var[r,h]=b(i,"x"),[n,l]=b(i,"y");this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:r,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:h,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:n,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:l,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}lines(){var t,i=this,e=this.options,a=l(e.padding),o=this.ctx;if(this.data&&this.data.length)for(var r=function(r){var h,l,d,c=i.data[r],f=e.colors[r],p=c.type||e.type||I;for(var[u,g]of(t=[],c.data)){var m=Math.floor((u-i.minX)*i.ratioX+a.left),v=Math.floor(i.viewHeight+a.top-(g-i.minY)*i.ratioY);t.push([m,v,u,g])}!1!==c.showLine&&(p!==I?function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:e="#000",size:a=1,dash:s=[],tension:o=.25}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(s),t.lineWidth=a,t.strokeStyle=e,t.moveTo(i[0][0],i[0][1]);for(var r=0;r<i.length-1;r++){var h=(i[r][0]+i[r+1][0])/2,n=(i[r][1]+i[r+1][1])/2,l=(h+i[r][0])/2,d=(h+i[r+1][0])/2;//let cp_y2 = (y_mid + coords[i + 1][1]) / 2;
t.quadraticCurveTo(l,i[r][1],h,n),t.quadraticCurveTo(d,i[r+1][1],i[r+1][0],i[r+1][1])}t.stroke(),t.restore(),t.closePath()}(o,t,{color:f,size:c.size}):W(o,t,{color:f,size:c.size}));var b=function(){for(var t={},i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return e.forEach((i=>{i&&s(i)&&Object.assign(t,i)})),t}({type:"circle"},e.dots,c.dots),x={color:null!==(h=b.color)&&void 0!==h?h:f,fill:null!==(l=b.fill)&&void 0!==l?l:f,radius:null!==(d=b.size)&&void 0!==d?d:2},Y=void 0;switch(b.type){case"square":Y=n;break;case"triangle":Y=y;break;case"diamond":Y=X;break;default:Y=w}c.dots&&!1!==e.showDots&&t.map((t=>{var[i,e]=t;Y(o,[i,e,x.radius],x)})),i.coords[c.name]={graph:c,coords:t,drawPointFn:Y,opt:x}},h=0;h<this.data.length;h++)r(h)}floatPoint(){var t=this.options,i=this.ctx,e=this.canvas.getBoundingClientRect(),a=!1;if(this.data&&this.data.length&&this.proxy.mouse){var{x:s,y:o}=this.proxy.mouse,r=s-e.left,h=o-e.top;for(var n in this.coords){var l=this.coords[n],d=l.drawPointFn,c=l.opt;// const graph = item.graph
for(var[f,p,u,g]of l.coords){var m=+(t.accuracy||c.radius),v=f-m,b=f+m,x=p-m,w=p+m;if(r>v&&r<b&&t.hoverMode!==G&&d(i,[f,p,c.radius],{color:c.color,fill:c.fill}),r>v&&r<b&&h>x&&h<w){t.hoverMode===G&&d(i,[f,p,2*c.radius],{color:c.color,fill:c.fill}),t.tooltip&&(this.showTooltip([u,g],l.graph),a=!0);break}}!a&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.lines(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(Z.prototype,Y),Object.assign(Z.prototype,N),Object.assign(Z.prototype,z);var q={other:{color:"#eaeaea"},labels:{font:e,color:"#fff"},showValue:!1,holeSize:0,legend:{vertical:!0},onDrawValue:null},E=function(t,i){var[e,a,s=4,o,r]=i,{color:h="#000",fill:n="#fff",size:l=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=h,t.fillStyle=n,t.arc(e,a,s,o,r),t.lineTo(e,a),t.fill(),t.stroke(),t.restore(),t.closePath()};class V extends p{constructor(t,i,e){if(super(t,i,o({},q,e),"pie"),this.center=[this.dpiWidth/2,this.dpiHeight/2],this.total=this.data.reduce(((t,i)=>t+i.data),0),this.legendItems=[],this.options.legend&&this.data.length)for(var a=0;a<this.data.length;a++)this.legendItems.push([this.data[a].name,this.options.colors[a]]);this.resize()}sectors(){var t,i,e=this.ctx,a=this.options,s=l(a.padding),[o,n]=this.center,d=this.viewHeight>this.viewWidth?this.viewWidth/2-(s.left+s.right):this.viewHeight/2-(s.top+s.bottom),c=0,f=360,p=0,u="";if(this.data&&this.data.length){for(var g=0;g<this.data.length;g++){var m=this.data[g],v=a.colors[g];f=2*Math.PI*m.data/this.total,E(e,[o,n,d,c,c+f],{fill:v,color:v}),c+=f}a.holeSize&&w(e,[o,n,a.holeSize],{color:"#fff"}),c=0;for(var b=0;b<this.data.length;b++){var x,y=this.data[b];f=2*Math.PI*y.data/this.total,p=a.holeSize/2,x=Math.round(100*y.data/this.total),u=a.showValue?y.data:x+"%","function"==typeof a.onDrawValue&&(u=a.onDrawValue.apply(null,[y.name,y.data,x])),t=o+(d/2+p)*Math.cos(c+f/2),i=n+(d/2+p)*Math.sin(c+f/2);var X=h(e,["%"],{font:a.labels.font});r(e,u,[t-X/2,i+a.labels.font.size/2],{color:a.labels.color,font:a.labels.font}),c+=f}}}draw(){super.draw(),this.sectors(),this.legend()}resize(){super.resize(),this.center=[this.dpiWidth/2,this.dpiHeight/2]}}var F={groupDistance:0,axis:P({},g),dataAxisX:!1,onDrawLabel:null};class K extends p{constructor(t,i,e){super(t,i,o({},F,e),"stacked-bar"),this.barWidth=0,this.maxY=0,this.maxX=0,this.minY=0,this.minX=0,this.viewAxis=this.options.dataAxisX?this.viewHeight:this.viewWidth,this.legendItems=[];var a=this.options.legend;if(a&&a.titles&&a.titles.length)for(var s=0;s<a.titles.length;s++)this.legendItems.push([a.titles[s],this.options.colors[s]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var a=this.data[e].data;i.push(a.reduce(((t,i)=>t+i),0))}var[,s]=x(i);this.maxX=this.maxY=t.boundaries&&!isNaN(t.boundaries.max)?t.boundaries.maxY:s,isNaN(this.maxX)&&(this.maxX=100),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratio=(this.options.dataAxisX?this.viewWidth:this.viewHeight)/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}calcBarWidth(){var t=this.options,i=this.data.length,e=(t.dataAxisX?this.viewHeight:this.viewWidth)-(this.data.length+1)*t.groupDistance;// space between groups
this.barWidth=e/i}barsX(){var t,i,e,a,s=this.options,o=l(s.padding),h=this.ctx,n=this.canvas.getBoundingClientRect(),d=!1;if(this.data&&this.data.length){this.proxy.mouse&&(e=this.proxy.mouse.x-n.left,a=this.proxy.mouse.y-n.top),t=o.left,i=o.top+s.groupDistance;var c=Array.isArray(s.colors)?s.colors:s.colors.split(",").map((t=>t.trim()));for(var f of this.data){for(var p=f.data,u=f.name,g=c.length>1?s.color:c[0],m=0,v=0;v<p.length;v++){var b=p[v]*this.ratio,x=c[v],w=c[v],y=s.values[v];H(h,[t+m,i,b,this.barWidth],{color:x,fill:w}),e>t+m&&e<t+b+m&&a>i&&a<i+this.barWidth&&(H(h,[t+m,i,b,this.barWidth-1],{color:"rgba(255,255,255,.3)",fill:"rgba(255,255,255,.3)"}),s.tooltip&&(this.showTooltip([y,p[v]],f),d=!0)),m+=b}i+=s.groupDistance+this.barWidth,"function"==typeof s.onDrawLabel&&(u=s.onDrawLabel.apply(null,u)),r(h,u,[0,0],{align:"center",color:g,stroke:g,font:s.font,translate:[t-20,i-this.barWidth/2],angle:Math.PI/2})}!d&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}barsY(){var t,i,e,a,s=this.options,o=l(s.padding),h=this.ctx,n=this.canvas.getBoundingClientRect(),d=!1;if(this.data&&this.data.length){this.proxy.mouse&&(e=this.proxy.mouse.x-n.left,a=this.proxy.mouse.y-n.top),t=o.left+s.groupDistance,i=this.viewHeight+o.top;var c=Array.isArray(s.colors)?s.colors:s.colors.split(",").map((t=>t.trim()));for(var f of this.data){for(var p=f.data,u=f.name,g=c.length>1?s.color:c[0],m=0,v=0;v<p.length;v++){var b=p[v]*this.ratio,x=c[v],w=c[v],y=s.values[v];H(h,[t,i-b-m,this.barWidth,b],{color:x,fill:w}),e>t&&e<t+this.barWidth-1&&a>i-b-m&&a<i-m&&(H(h,[t,i-b-m,this.barWidth,b],{color:"rgba(255,255,255,.3)",fill:"rgba(255,255,255,.3)"}),s.tooltip&&(this.showTooltip([y,p[v]],f),d=!0)),m+=b}t+=s.groupDistance+this.barWidth,"function"==typeof s.onDrawLabel&&(u=s.onDrawLabel.apply(null,u)),r(h,u,[0,0],{align:"center",color:g,stroke:g,font:s.font,translate:[t-s.groupDistance-this.barWidth/2,i+20]})}!d&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}draw(){var t=this.options;super.draw(),this.calcBarWidth(),this.calcRatio(),t.dataAxisX?(this.axisX(),this.barsX()):(this.axisY(),this.barsY()),this.arrowY(),this.arrowX(),this.legend()}}Object.assign(K.prototype,N);globalThis.chart={areaChart:(t,i,e)=>new D(t,i,e),barChart:(t,i,e)=>new L(t,i,e),bubbleChart:(t,i,e)=>new O(t,i,e),histogramChart:(t,i,e)=>new A(t,i,e),lineChart:(t,i,e)=>new Z(t,i,e),pieChart:(t,i,e)=>new V(t,i,e),stackedBarChart:(t,i,e)=>new K(t,i,e)}}();
