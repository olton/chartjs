/*! 
 * MetroUI :: ChartJS - Create different charts in js
 * https://pimenov.com.ua
 *
 * Copyright 2021 Serhii Pimenov
 * Released under the MIT license
 */
!function(){"use strict";var t={width:1,lineType:"solid",color:"#e3e3e3",radius:0},i={style:"normal",family:"Helvetica, sans-serif",size:12,weight:"normal",lineHeight:1.2},e=Object.assign({},i,{weight:"bold"}),o={dpi:1,height:200,width:"100%",padding:{top:40,bottom:40,left:40,right:40},margin:{top:0,bottom:0,left:0,right:0},background:"#fff",color:"#000",font:i,border:t,cross:{size:1,color:"#bbb",dash:[5,3]},showLines:!0,axis:{lineColor:"#e3e3e3",labelColor:"#000",showXAxis:!0,showYAxis:!0,showXLines:!0,showYLines:!0,showXLabel:!0,showYLabel:!0,showMinMax:!1,linesX:5,linesY:5,font:e,arrowX:{color:"#000"},arrowY:{color:"#000"},onDrawLabelY:null,onDrawLabelX:null},title:{display:!0,align:"center",
// start, center, end
rtl:!1,color:"#000",text:"",font:Object.assign({},i,{weight:"bold",size:24}),padding:{top:10,bottom:10,left:10,right:10}},legend:{rtl:!1,margin:{top:20,left:0,right:0,bottom:0},padding:{top:0,left:0,right:0,bottom:0},font:e,border:t,dash:[],color:"#fff"},tooltip:{width:"auto",background:"#fff",color:"#000",font:i,border:t,padding:{top:10,bottom:10,left:10,right:10},shadow:{shiftX:2,shiftY:2,blur:2,stretch:0,color:"#bbb"},onShow:null},boundaries:!1,accuracy:10,value:{fixed:0},onClick:null,onHover:null,onEnter:null,onLeave:null};
/**
     * Simple object check.
     * @param item
     * @returns {boolean}
     */
function s(t){return t&&"object"==typeof t&&!Array.isArray(t)}
/**
     * Deep merge two objects.
     * @param target
     * @param ...sources
     */function a(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),o=1;o<i;o++)e[o-1]=arguments[o];if(!e.length)return t;var r=e.shift();if(s(t)&&s(r))for(var n in r)s(r[n])?(t[n]||Object.assign(t,{[n]:{}}),a(t[n],r[n])):Object.assign(t,{[n]:r[n]});return a(t,...e)}var r=(t,i,e,o)=>{var[s,a]=e,{align:r="left",color:n="#000",stroke:l="#000",font:h}=o,{style:d="normal",weight:c="normal",size:p=12,lineHeight:f=1,family:g="sans-serif"}=h;t.save(),t.beginPath(),t.textAlign=r,t.fillStyle=n,t.strokeStyle=l,t.font="".concat(d," ").concat(c," ").concat(p,"px/").concat(f," ").concat(g),i.split("\n").map(((i,e)=>{t.fillText(i,s,a+a*e*f)})),t.closePath(),t.restore()},n=(t,i,e)=>{var[o,s]=i,{color:a="#000",fill:r="#fff",radius:n=4,size:l=1,dash:h=[]}=e;t.beginPath(),t.save(),t.setLineDash(h),t.lineWidth=l,t.strokeStyle=a,t.fillStyle=r,t.rect(o-n,s-n,2*n,2*n),t.fill(),t.stroke(),t.restore(),t.closePath()};class l{constructor(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown";this.options=a({},o,e),this.data=i,this.el=document.querySelector(t),this.canvas=null,this.ctx=null,this.raf=null,this.tooltip=null,this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[],this.chartType=s;var r=this;if(this.proxy=new Proxy({},{set(){var t=Reflect.set(...arguments);return r.raf=requestAnimationFrame(r.draw.bind(r)),t}}),!this.el)throw new Error("You must define a selector for chart wrapper element!");this.options.border&&(this.el.style.border="".concat(this.options.border.width,"px ").concat(this.options.border.lineType," ").concat(this.options.border.color)),this.calcInternalValues(),this.createCanvas(),this.addEvents()}createCanvas(){this.canvas=document.createElement("canvas"),this.el.innerHTML="",this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.setCanvasSize()}setCanvasSize(){var t=this.options;this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=t.dpi*this.width,this.canvas.height=t.dpi*this.height}calcInternalValues(){var t,i,e=this.options,o=this.el.getBoundingClientRect(),{width:s,height:a}=o;t=e.width.toString().includes("%")?s/100*parseInt(e.width):+e.width,i=e.height.toString().includes("%")?a/100*parseInt(e.height):+e.height,this.width=t,this.height=i,this.dpiHeight=e.dpi*i,this.dpiWidth=e.dpi*t,this.viewHeight=this.dpiHeight-(e.padding.top+e.padding.bottom),this.viewWidth=this.dpiWidth-(e.padding.left+e.padding.right)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY-this.minY)}drawArrowX(){var t=this.options,i=this.ctx,e=t.padding.top,o=t.padding.left,s=this.viewWidth+o,a=this.viewHeight+e;i.beginPath(),i.strokeStyle=t.axis.arrowX.color,i.moveTo(o,a),i.lineTo(s,a),i.moveTo(s,a),i.lineTo(s-15,a-5),i.moveTo(s,a),i.lineTo(s-15,a+5),i.stroke(),i.closePath()}drawArrowY(){var t=this.options,i=this.ctx,e=t.padding.top,o=t.padding.left,s=this.viewHeight+e;i.beginPath(),i.strokeStyle=t.axis.arrowY.color,i.moveTo(o,e),i.lineTo(o,s),i.moveTo(o,e),i.lineTo(o-5,e+15),i.moveTo(o,e),i.lineTo(o+5,e+15),i.stroke(),i.closePath()}drawAxisY(){var t=this.options,{fixed:i=0}=t.value.fixed,e=this.viewHeight/t.axis.linesY,o=(this.maxY-this.minY)/t.axis.linesY,s=this.ctx;s.strokeStyle=t.axis.lineColor,s.textAlign="end",s.beginPath();for(var a=0;a<=t.axis.linesY;a++){var r=e*a+t.padding.top,n=this.viewWidth+t.padding.left,l=this.maxY-o*a;"function"==typeof t.axis.onDrawLabelY&&(l=t.axis.onDrawLabelY.apply(null,[l])),l=l.toFixed(i),t.axis.showYLines&&(s.moveTo(t.padding.left,r),s.lineTo(n,r)),t.axis.showYLabel&&(t.axis.showMinMax?0!==a&&a!==t.axis.linesY||s.fillText(l.toString(),t.padding.left-5,r-5):0!==a&&s.fillText(l.toString(),t.padding.left-5,r-5))}s.stroke(),s.closePath()}drawAxisX(){var t,i=this.options,e=this.viewWidth/i.axis.linesX,o=(this.maxX-this.minX)/i.axis.linesX,s=this.ctx,a=null!==(t=i.axis&&i.axis.font)&&void 0!==t?t:i.font;s.strokeStyle=i.axis.lineColor,s.textAlign="start",s.beginPath();for(var r=0;r<=i.axis.linesX;r++){var n=e*r+i.padding.left,l=this.minX+o*r;"function"==typeof i.axis.onDrawLabelX&&(l=i.axis.onDrawLabelX.apply(null,[l])),i.axis.showXLines&&(s.moveTo(n,i.padding.top),s.lineTo(n,this.viewHeight+i.padding.top)),r<i.axis.linesX&&i.axis.showXLabel&&s.fillText(l.toString(),n,this.viewHeight+i.padding.top+a.size+5)}s.stroke(),s.closePath()}drawAxis(){var t,i=this.options,e=this.ctx;if(i.axis){var o=null!==(t=i.axis.font)&&void 0!==t?t:i.font;return e.font="".concat(o.style," ").concat(o.weight," ").concat(o.size,"px ").concat(o.family),e.fillStyle=i.axis.labelColor,e.lineWidth=1,e.setLineDash([]),i.axis.showYAxis&&i.axis.linesY&&this.drawAxisY(),i.axis.arrowY&&this.drawArrowY(),i.axis.showXAxis&&i.axis.linesX&&this.drawAxisX(),i.axis.arrowX&&this.drawArrowX(),this}}drawCross(){var t=this.options,i=t.cross,e=this.ctx,o=this.canvas.getBoundingClientRect();if(t.cross&&(!t.cross||this.proxy.mouse)){var{x:s,y:a}=this.proxy.mouse;s-=o.left,a-=o.top,s-t.padding.left+1<0||s>this.viewWidth+t.padding.left+1||a-t.padding.top+1<0||a>this.viewHeight+t.padding.top+1||(e.beginPath(),e.setLineDash(t.cross.dash),e.lineWidth=i.size,e.strokeStyle=i.color,// vertical line
e.moveTo(s,t.padding.top),e.lineTo(s,this.viewHeight+t.padding.top),// Horizontal line
e.moveTo(t.padding.left,a),e.lineTo(this.viewWidth+t.padding.left,a),e.arc(s,a,10,0,2*Math.PI),e.stroke(),e.closePath())}}drawTitle(){var t,i=this.options.title,e=this.ctx;if(i&&i.text){var{text:o,align:s,color:a,font:n}=i;switch(s){case"center":t=this.dpiWidth/2;break;case"right":t=this.dpiWidth-5;break;default:t=5}return r(e,o,[t,n.size+5],{align:i.align,color:i.color,stroke:i.color,font:i.font}),this}}drawLegend(){var t,i,e,o=this.options,a=o.legend,l=o.legend.font.size/2,h=this.ctx,d=this.legendItems;if(a&&s(a)&&d&&Array.isArray(d)&&d.length){t=a.font.size*a.font.lineHeight,e=o.padding.top+this.viewHeight+a.font.size+a.padding.top+a.margin.top,i=o.padding.left+a.padding.left+a.margin.left;for(var c=0;c<d.length;c++){var[p,f]=d[c],g=h.measureText(p).width;i+g>this.viewWidth&&(i=o.padding.left+a.padding.left+a.margin.left,e+=t),n(h,[i,e],{color:f,fill:f,radius:l}),r(h,p,[i+l+5,e+l/2],{color:o.font.color,stroke:o.font.color,font:o.font}),i+=l+g+20}return this}}drawLegendVertical(){var t,i,e,o=this.options,a=o.legend;o.dpi;var l,h,d=o.legend.font.size/2,c=this.ctx,p=this.legendItems;if(a&&s(a)&&p&&Array.isArray(p)&&p.length){t=a.font.size*a.font.lineHeight,e=o.padding.top+a.font.size+a.padding.top+a.margin.top,i=o.padding.left+a.padding.left+a.margin.left,l=((t,i,e)=>{var o,{font:s=null}=e,a=0;if(t.save(),s){var{style:r="normal",weight:n="normal",size:l=12,lineHeight:h=1.2,family:d="sans-serif"}=s;t.font="".concat(r," ").concat(n," ").concat(l,"px/").concat(h," ").concat(d)}for(var c=0;c<i.length;c++)(o=t.measureText(i[c][0]).width)>a&&(a=o);return t.restore(),a})(c,p,a.font)+2*d+5+a.padding.left+a.padding.right,h=p.length*t+a.padding.top+a.padding.bottom,((t,i,e)=>{var[o,s,a,r]=i,{color:n="#fff",borderColor:l="#000",dash:h=[],size:d=1}=e;t.save(),t.beginPath(),t.strokeStyle=l,t.fillStyle=n,t.setLineDash(h),t.lineWidth=d,t.clearRect(o,s,a,r),t.fillRect(o,s,a,r),d&&t.strokeRect(o,s,a,r),t.closePath(),t.restore()})(c,[i-d-a.padding.left,e-d-a.padding.top,l,h],{color:a.color,dash:a.dash,size:a.border.width,borderColor:a.border.color});for(var f=0;f<p.length;f++){var[g,v]=p[f];n(c,[i,e],{color:v,fill:v,radius:d}),r(c,g,[i+d+5,e+d/2+2],{color:o.font.color,stroke:o.font.color,font:o.font}),e+=t}return this}}draw(){this.clear(),this.calcRatio(),this.drawTitle(),this.drawAxis()}showTooltip(t,i){var e=this.options;if(this.tooltip&&(this.tooltip.remove(),this.tooltip=null),e.tooltip){var{x:o,y:s}=this.proxy.mouse,a=document.createElement("div"),r=e.tooltip.onShow,n=e.tooltip.font,l=e.tooltip.shadow,h=e.tooltip.border,d=e.tooltip.padding;a.style.position="fixed",a.style.border="".concat(h.width,"px ").concat(h.lineType," ").concat(h.color),a.style.borderRadius="".concat(h.radius),a.style.padding="".concat(d.top,"px ").concat(d.right,"px ").concat(d.bottom,"px ").concat(d.left,"px"),a.style.background="".concat(e.tooltip.background),a.style.font="".concat(n.style," ").concat(n.weight," ").concat(n.size,"px/").concat(n.lineHeight," ").concat(n.family),a.style.boxShadow="".concat(l.shiftX,"px ").concat(l.shiftY,"px ").concat(l.blur,"px ").concat(l.color),a.innerHTML=r&&"function"==typeof r?r.apply(null,[t,i]):t,document.querySelector("body").appendChild(a),a.style.top="".concat(s-a.clientHeight-5,"px"),a.style.left="".concat(o-a.clientWidth/2-5,"px"),this.tooltip=a}}clear(){this.ctx.clearRect(0,0,this.dpiWidth,this.dpiHeight)}mouseMove(t){var i=this.options.onHover,{clientX:e,clientY:o}=t;"function"==typeof i&&i(e,o),this.proxy.mouse={x:e,y:o}}mouseLeave(){var t=this.options.onLeave;"function"==typeof t&&t(),this.proxy.mouse=null}resize(){this.calcInternalValues(),this.setCanvasSize(),this.draw()}addEvents(){var t=this.canvas;t.addEventListener("mousemove",this.mouseMove.bind(this)),t.addEventListener("mouseleave",this.mouseLeave.bind(this)),window.addEventListener("resize",this.resize.bind(this))}destroy(){var t=this.canvas;cancelAnimationFrame(this.raf),t.removeEventListener("mousemove",this.mouseMove.bind(this)),t.removeEventListener("mouseleave",this.mouseLeave.bind(this)),window.removeEventListener("resize",this.resize.bind(this))}}var h=function(){var t,i,e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";for(var a of o)e="x"===s.toLowerCase()?a[0]:a[1],(isNaN(t)||t>e)&&(t=e),(isNaN(i)||i<e)&&(i=e);return[t,i]},d=(t,i,e)=>{var[o,s]=i,{color:a="#000",fill:r="#fff",radius:n=4,size:l=1}=e;t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=a,t.fillStyle=r,t.arc(o,s,n,0,2*Math.PI),t.fill(),t.stroke(),t.restore(),t.closePath()},c=(t,i,e)=>{var[o,s]=i,{color:a="#000",fill:r="#fff",radius:n=4,size:l=1}=e;t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=a,t.fillStyle=r;var h=n;t.moveTo(o,s-h),t.lineTo(o+h,s+h),t.lineTo(o-h,s+h),t.lineTo(o,s-h),t.fill(),t.stroke(),t.restore(),t.closePath()},p=(t,i,e)=>{var[o,s]=i,{color:a="#000",fill:r="#fff",radius:n=1,size:l=1}=e;t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=a,t.fillStyle=r;var h=n;t.moveTo(o,s-h),t.lineTo(o+h,s),t.lineTo(o,s+h),t.lineTo(o-h,s),t.lineTo(o,s-h),t.fill(),t.stroke(),t.restore(),t.closePath()},f={};class g extends l{constructor(t){if(super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a({},f,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"line"),this.coords={},this.legendItems=[],this.options.legend)for(var i of this.data)this.legendItems.push([i.name,i.color]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var e in this.data){var o=this.data[e].data;if(Array.isArray(o))for(var[s,a]of o)i.push([s,a])}var[r,n]=h(i,"x"),[l,d]=h(i,"y");return this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:r,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:n,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:l,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:d,this}drawData(){var t,i=this,e=this.options,o=this.ctx,s=function(s){var a,r;for(var[l,h]of(t=[],s.data)){var f=Math.floor((l-i.minX)*i.ratioX+e.padding.left),g=Math.floor(i.viewHeight+e.padding.top-(h-i.minY)*i.ratioY);t.push([f,g,l,h])}e.showLines&&!1!==s.showLines&&function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:e="#000",size:o=1,dash:s=[]}=arguments.length>2?arguments[2]:void 0;t.beginPath(),t.save(),t.setLineDash(s),t.lineWidth=o,t.strokeStyle=e,i.map((i=>{var[e,o]=i;t.lineTo(e,o)})),t.stroke(),t.restore(),t.closePath()}(o,t,{color:s.color,size:s.size});var v=s.dots?s.dots:{type:"dot"},u={color:null!==(a=v.color)&&void 0!==a?a:s.color,fill:null!==(r=v.fill)&&void 0!==r?r:s.color,radius:v.size||4},w=void 0;switch(v.type){case"square":w=n;break;case"triangle":w=c;break;case"diamond":w=p;break;default:w=d}s.dots&&t.map((t=>{var[i,e]=t;
// console.log(x, y)
w(o,[i,e],u)})),i.coords[s.name]={graph:s,coords:t,drawPointFn:w,opt:u}};for(var a of this.data)s(a)}drawFloatPoint(){var t=this.options,i=this.ctx,e=this.canvas.getBoundingClientRect(),o=!1;if(this.proxy.mouse){var{x:s,y:a}=this.proxy.mouse,r=s-e.left,n=a-e.top;for(var l in this.coords){var h=this.coords[l],d=h.drawPointFn,c=h.opt;for(var[p,f,g,v]of h.coords){var u=+(t.accuracy||c.radius);if(r>p-u&&r<p+u&&n>f-u&&n<f+u){d(i,[p,f],{color:c.color,radius:2*c.radius,fill:c.fill}),t.tooltip&&(this.showTooltip([g,v],h.graph),o=!0);break}}!o&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}}drawLegend(){return!0===this.options.legend.vertical?super.drawLegendVertical():super.drawLegend()}draw(){super.draw(),this.drawData(),this.drawFloatPoint(),this.drawCross(),this.drawLegend()}}var v={groupDistance:20,barDistance:10,legend:{titles:null},onDrawLabel:null},u=(t,i,e)=>{var[o,s,a,r]=i,{color:n="#000",fill:l="#fff",size:h=1,dash:d=[]}=e;t.beginPath(),t.save(),t.setLineDash(d),t.lineWidth=h,t.strokeStyle=n,t.fillStyle=l,t.rect(o,s,a,r),t.fill(),t.stroke(),t.restore(),t.closePath()};class w extends l{constructor(t,i,e){super(t,i,a({},v,e),"bar"),this.groups=0,this.barWidth=0,this.legendItems=[];var o=this.options.legend;if(o&&o.titles&&o.titles.length)for(var s=0;s<o.titles.length;s++)this.legendItems.push([o.titles[s],this.data[0].color.split(",").map((t=>t.trim()))[s]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,{fixed:i=0}=t.value,e=[];for(var o in this.data){var s=this.data[o].data;e=[].concat(e,s)}for(var a in this.data)this.data[a].data.length,this.groups++;var[,r]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[Math.min.apply(null,t),Math.max.apply(null,t)]}(e);return this.maxY=(t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:r).toFixed(i),this}calcBarWidth(){var t=this.options,i=0;for(var e of this.data)i+=e.data.length;this.barWidth=Math.round((this.viewWidth-this.data.length*+t.groupDistance-i*+t.barDistance)/i)-5}drawAxisX(){}drawData(){var t,i,e=this.options,o=this.ctx,s=e.padding.left+e.groupDistance,a=this.viewHeight+e.padding.top,n=this.canvas.getBoundingClientRect(),l=!1;for(var h of(this.proxy.mouse&&(t=this.proxy.mouse.x-n.left,i=this.proxy.mouse.y-n.top),this.data)){for(var d=h.color.split(",").map((t=>t.trim())),c=h.name,p=h.data,f=d.length>1?e.color:d[0],g=0,v=0;v<p.length;v++){var w=p[v]*this.ratioY,x=d[v],m=d[v];u(o,[s,a-w,this.barWidth-1,w],{color:x,fill:m}),t>s&&t<s+this.barWidth-1&&i>a-w&&i<a&&(u(o,[s,a-w,this.barWidth-1,w],{color:x,fill:"rgba(255,255,255,.3)"}),e.tooltip&&(this.showTooltip([e.legend.titles?e.legend.titles[v]:c,p[v]],h),l=!0)),g+=this.barWidth,s+=e.barDistance+this.barWidth}"function"==typeof e.onDrawLabel&&(c=e.onDrawLabel.apply(null,c)),r(o,c,[s-g/2-e.barDistance,a+20],{align:"center",color:f,stroke:f,font:e.font}),s+=e.groupDistance}return!l&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this}drawLegend(){return!0===this.options.legend.vertical?super.drawLegendVertical():super.drawLegend()}draw(){this.calcBarWidth(),super.draw(),this.drawData(),this.drawCross(),this.drawLegend()}}var x={axis:{showXLabel:!1,showYLabel:!1}};class m extends l{constructor(t,i,e){super(t,i,a({},x,e),"pie"),this.resize()}drawData(){}drawLegend(){return!0===this.options.legend.vertical?super.drawLegendVertical():super.drawLegend()}// drawAxisX() {}
// drawAxisY() {}
drawCross(){}drawArrowX(){}drawArrowY(){}draw(){super.draw(),this.drawData(),this.drawLegend()}}globalThis.chart={lineChart:(t,i,e)=>new g(t,i,e),barChart:(t,i,e)=>new w(t,i,e),pieChart:(t,i,e)=>new m(t,i,e)}}();
